<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisioGeneral - Prototip Visualitzacions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #4a6fa5 0%, #3d5a80 100%);
            color: white;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .header .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header .logo-box {
            width: 45px;
            height: 45px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #4a6fa5;
            font-size: 12px;
        }

        .nav-tabs {
            background: white;
            padding: 0 40px;
            display: flex;
            gap: 10px;
            border-bottom: 1px solid #ddd;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            font-weight: 500;
        }

        .nav-tab:hover {
            background: #f9f9f9;
        }

        .nav-tab.active {
            border-bottom-color: #4a6fa5;
            color: #4a6fa5;
        }

        .content {
            padding: 30px 40px;
        }

        .section-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: #333;
        }

        .viz-container {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .viz-container.active {
            display: block;
        }

        /* ============================================
           OPCI√ì 1: TREEMAP
           ============================================ */
        .treemap {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(6, 80px);
            gap: 4px;
            margin-top: 20px;
        }

        .treemap-item {
            border-radius: 8px;
            padding: 12px;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }

        .treemap-item:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .treemap-item .name {
            font-weight: 600;
            font-size: 13px;
        }

        .treemap-item .count {
            font-size: 11px;
            opacity: 0.9;
        }

        .treemap-item .badge {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 20px;
            height: 20px;
            background: #d9534f;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .treemap-item.growth::after {
            content: '‚Üó';
            position: absolute;
            bottom: 8px;
            right: 8px;
            font-size: 16px;
        }

        .treemap-item.paused::after {
            content: '‚è∏';
            position: absolute;
            bottom: 8px;
            right: 8px;
            font-size: 12px;
            opacity: 0.7;
        }

        /* Colores por √°rea - Paleta suave azules/verdes/lilas */
        .area-comunitaria { background: linear-gradient(135deg, #5b9aa0 0%, #4a8389 100%); }  /* Turquesa apagado */
        .area-infancia { background: linear-gradient(135deg, #6b9b7a 0%, #5a8a69 100%); }     /* Verde salvia */
        .area-insercio { background: linear-gradient(135deg, #7a9ec2 0%, #6889ad 100%); }     /* Azul acero suave */
        .area-salut { background: linear-gradient(135deg, #9b8bb4 0%, #8678a3 100%); }        /* Lila apagado */
        .area-penitenciari { background: linear-gradient(135deg, #8a9a9e 0%, #78898d 100%); } /* Gris azulado */
        .area-admin { background: linear-gradient(135deg, #a0927b 0%, #8f826c 100%); }        /* Topo/beige */

        /* Posiciones treemap */
        .tm-palma { grid-column: 1 / 4; grid-row: 1 / 3; }
        .tm-llucmajor { grid-column: 4 / 6; grid-row: 1 / 3; }
        .tm-soller { grid-column: 6 / 8; grid-row: 1 / 2; }
        .tm-alcudia { grid-column: 6 / 8; grid-row: 2 / 3; }
        .tm-altres-com { grid-column: 1 / 3; grid-row: 3 / 4; }
        .tm-caixa { grid-column: 3 / 5; grid-row: 3 / 4; }
        .tm-sempre { grid-column: 5 / 6; grid-row: 3 / 4; }

        .tm-edfam { grid-column: 8 / 11; grid-row: 1 / 3; }
        .tm-suport { grid-column: 11 / 13; grid-row: 1 / 2; }
        .tm-llar { grid-column: 11 / 13; grid-row: 2 / 3; }
        .tm-eman-acomp { grid-column: 8 / 10; grid-row: 3 / 4; }
        .tm-eman-hab { grid-column: 10 / 13; grid-row: 3 / 4; }

        .tm-soib { grid-column: 1 / 4; grid-row: 4 / 5; }
        .tm-incorpora { grid-column: 4 / 6; grid-row: 4 / 5; }
        .tm-reincorpora { grid-column: 6 / 7; grid-row: 4 / 5; }

        .tm-sm-acomp { grid-column: 7 / 9; grid-row: 4 / 5; }
        .tm-sm-hab { grid-column: 9 / 11; grid-row: 4 / 5; }
        .tm-sm-dom { grid-column: 11 / 13; grid-row: 4 / 5; }

        .tm-preso-joves { grid-column: 1 / 3; grid-row: 5 / 6; }
        .tm-preso-cis { grid-column: 3 / 5; grid-row: 5 / 6; }
        .tm-preso-alt { grid-column: 5 / 7; grid-row: 5 / 6; }

        .tm-admin { grid-column: 7 / 13; grid-row: 5 / 6; }

        /* Leyenda */
        .legend {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .legend-symbol {
            font-size: 16px;
        }

        /* ============================================
           OPCI√ì 2: BOMBOLLES
           ============================================ */
        .bubbles-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            padding: 20px;
        }

        .bubble-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .bubble-group-title {
            font-weight: 600;
            font-size: 14px;
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
        }

        .bubbles {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            max-width: 300px;
        }

        .bubble {
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
            text-align: center;
            padding: 10px;
        }

        .bubble:hover {
            transform: scale(1.1);
        }

        .bubble .name {
            font-size: 10px;
            font-weight: 600;
            line-height: 1.2;
        }

        .bubble .count {
            font-size: 14px;
            font-weight: bold;
        }

        /* Tama√±os de burbuja seg√∫n trabajadores */
        .bubble.size-xl { width: 120px; height: 120px; }
        .bubble.size-l { width: 100px; height: 100px; }
        .bubble.size-m { width: 80px; height: 80px; }
        .bubble.size-s { width: 65px; height: 65px; }
        .bubble.size-xs { width: 50px; height: 50px; }

        /* ============================================
           OPCI√ì 3: ORGANIGRAMA
           ============================================ */
        .org-tree {
            margin-top: 20px;
        }

        .org-area {
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        .org-area-header {
            padding: 15px 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .org-area-header h3 {
            font-size: 16px;
            font-weight: 600;
        }

        .org-area-header .stats {
            font-size: 13px;
            opacity: 0.9;
        }

        .org-area-header .toggle {
            font-size: 20px;
            transition: transform 0.2s;
        }

        .org-area.expanded .toggle {
            transform: rotate(180deg);
        }

        .org-services {
            display: none;
            padding: 15px 20px;
            background: #fafafa;
        }

        .org-area.expanded .org-services {
            display: block;
        }

        .org-service {
            margin-bottom: 15px;
        }

        .org-service-name {
            font-weight: 600;
            font-size: 14px;
            color: #555;
            margin-bottom: 8px;
            padding-left: 15px;
            border-left: 3px solid #ddd;
        }

        .org-programs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding-left: 20px;
        }

        .org-program {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 10px 15px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .org-program:hover {
            border-color: #999;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .org-program .workers {
            background: #eee;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }

        .org-program .status {
            font-size: 14px;
        }

        .org-program.growth {
            border-left: 3px solid #5b9aa0;
        }

        .org-program.paused {
            opacity: 0.6;
            border-left: 3px solid #e0a458;
        }

        .org-program.new {
            border-left: 3px solid #7a9ec2;
        }

        /* ============================================
           INFO PANEL
           ============================================ */
        .info-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 20px rgba(0,0,0,0.1);
            transition: right 0.3s;
            z-index: 100;
            overflow-y: auto;
        }

        .info-panel.open {
            right: 0;
        }

        .info-panel-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .info-panel-header h2 {
            font-size: 18px;
        }

        .info-panel-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .info-panel-content {
            padding: 20px;
        }

        .info-section {
            margin-bottom: 20px;
        }

        .info-section h4 {
            font-size: 12px;
            text-transform: uppercase;
            color: #999;
            margin-bottom: 8px;
        }

        .info-section p {
            font-size: 14px;
            line-height: 1.5;
        }

        .info-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .info-stat {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .info-stat .number {
            font-size: 28px;
            font-weight: bold;
            color: #333;
        }

        .info-stat .label {
            font-size: 12px;
            color: #666;
        }

        .questio-mini {
            background: #f5f8fa;
            border-left: 3px solid #7a9ec2;
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 0 6px 6px 0;
            font-size: 13px;
        }

        .questio-mini.urgent {
            background: #fdf2f2;
            border-left-color: #d9534f;
        }

        /* ============================================
           RESUMEN GLOBAL
           ============================================ */
        .global-summary {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .summary-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            flex: 1;
            min-width: 150px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .summary-card .number {
            font-size: 36px;
            font-weight: bold;
            color: #3d5a80;
        }

        .summary-card .label {
            font-size: 13px;
            color: #666;
            margin-top: 5px;
        }

        .summary-card.alert {
            border-left: 4px solid #d9534f;
        }

        .summary-card.growth {
            border-left: 4px solid #5b9aa0;
        }

        /* ============================================
           DESCRIPCION DE CADA OPCI√ìN
           ============================================ */
        .option-description {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .option-description h3 {
            color: #3d5a80;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .option-description p {
            font-size: 14px;
            color: #333;
            line-height: 1.5;
        }

        .option-description ul {
            margin-top: 10px;
            padding-left: 20px;
        }

        .option-description li {
            font-size: 13px;
            margin-bottom: 5px;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .pros, .cons {
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 13px;
        }

        .pros {
            background: #e8f5e9;
        }

        .cons {
            background: #fff3e0;
        }

        .pros h4, .cons h4 {
            font-size: 12px;
            margin-bottom: 8px;
        }

        .pros h4 { color: #2e7d32; }
        .cons h4 { color: #e65100; }
    </style>
</head>
<body>

    <header class="header">
        <div class="logo">
            <div class="logo-box">GREC</div>
            <h1>VisioGeneral</h1>
        </div>
        <div style="font-size: 14px;">Demo de visualitzacions ¬∑ Maria</div>
    </header>

    <nav class="nav-tabs">
        <div class="nav-tab active" onclick="showTab('treemap')">Opci√≥ 1: Treemap</div>
        <div class="nav-tab" onclick="showTab('bubbles')">Opci√≥ 2: Bombolles</div>
        <div class="nav-tab" onclick="showTab('org')">Opci√≥ 3: Organigrama</div>
    </nav>

    <main class="content">

        <!-- Resumen global (com√∫n a todas) -->
        <div class="global-summary">
            <div class="summary-card">
                <div class="number">179</div>
                <div class="label">Treballadors</div>
            </div>
            <div class="summary-card">
                <div class="number">6</div>
                <div class="label">√Ärees</div>
            </div>
            <div class="summary-card">
                <div class="number">22</div>
                <div class="label">Programes actius</div>
            </div>
            <div class="summary-card alert">
                <div class="number">3</div>
                <div class="label">Q√ºestions urgents</div>
            </div>
            <div class="summary-card growth">
                <div class="number">4</div>
                <div class="label">L√≠nies creixement</div>
            </div>
        </div>

        <!-- OPCI√ìN 1: TREEMAP -->
        <div id="treemap" class="viz-container active">

            <div class="option-description">
                <h3>Opci√≥ 1: Treemap (Mosaico de rectangles)</h3>
                <p>Cada rectangle representa un programa. El <strong>tamany</strong> del rectangle √©s proporcional al nombre de treballadors. Els colors identifiquen l'√†rea.</p>
                <div class="pros-cons">
                    <div class="pros">
                        <h4>‚úì Avantatges</h4>
                        <ul>
                            <li>Molt compacte: tot en una sola vista</li>
                            <li>F√†cil veure el "pes" de cada programa</li>
                            <li>Permet afegir indicadors (urgents, creixement)</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>‚ö† Inconvenients</h4>
                        <ul>
                            <li>La jerarquia (√†rea‚Üíservei‚Üíprograma) es perd una mica</li>
                            <li>Pot ser dif√≠cil de llegir si hi ha molts programes petits</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h2 class="section-title">Mapa de l'Entitat ¬∑ 2025</h2>

            <div class="treemap">
                <!-- Intervenci√≥ Comunit√†ria -->
                <div class="treemap-item area-comunitaria tm-palma" onclick="openPanel('Palma')">
                    <span class="name">Palma</span>
                    <span class="count">12 treballadors</span>
                </div>
                <div class="treemap-item area-comunitaria tm-llucmajor growth" onclick="openPanel('Llucmajor')">
                    <span class="name">Llucmajor</span>
                    <span class="count">8 treballadors</span>
                </div>
                <div class="treemap-item area-comunitaria tm-soller" onclick="openPanel('S√≥ller')">
                    <span class="name">S√≥ller</span>
                    <span class="count">4 treb.</span>
                </div>
                <div class="treemap-item area-comunitaria tm-alcudia growth" onclick="openPanel('Alc√∫dia')">
                    <span class="name">Alc√∫dia</span>
                    <span class="count">6 treb.</span>
                    <span class="badge">2</span>
                </div>
                <div class="treemap-item area-comunitaria tm-altres-com" onclick="openPanel('Altres municipis')">
                    <span class="name">Altres municipis</span>
                    <span class="count">8 treballadors</span>
                </div>
                <div class="treemap-item area-comunitaria tm-caixa" onclick="openPanel('CaixaProInf√†ncia')">
                    <span class="name">CaixaProInf√†ncia</span>
                    <span class="count">5 treb.</span>
                </div>
                <div class="treemap-item area-comunitaria tm-sempre" onclick="openPanel('Sempre Acompanyats')">
                    <span class="name">Sempre Acomp.</span>
                    <span class="count">2 t.</span>
                </div>

                <!-- Inf√†ncia, joves i fam√≠lia -->
                <div class="treemap-item area-infancia tm-edfam" onclick="openPanel('Educadors Familiars')">
                    <span class="name">Educadors Familiars</span>
                    <span class="count">18 treballadors</span>
                    <span class="badge">1</span>
                </div>
                <div class="treemap-item area-infancia tm-suport" onclick="openPanel('Suport al Menor')">
                    <span class="name">Suport</span>
                    <span class="count">12 treb.</span>
                </div>
                <div class="treemap-item area-infancia tm-llar" onclick="openPanel('Llar')">
                    <span class="name">Llar</span>
                    <span class="count">8 treb.</span>
                </div>
                <div class="treemap-item area-infancia tm-eman-acomp growth" onclick="openPanel('Emancipaci√≥ Acompanyament')">
                    <span class="name">Eman. Acomp.</span>
                    <span class="count">10 treb.</span>
                </div>
                <div class="treemap-item area-infancia tm-eman-hab growth" onclick="openPanel('Emancipaci√≥ Habitatge')">
                    <span class="name">Emancipaci√≥ Habitatge</span>
                    <span class="count">14 treballadors</span>
                </div>

                <!-- Inserci√≥ laboral -->
                <div class="treemap-item area-insercio tm-soib" onclick="openPanel('SOIB')">
                    <span class="name">SOIB - Orientaci√≥ Professional</span>
                    <span class="count">15 treballadors</span>
                </div>
                <div class="treemap-item area-insercio tm-incorpora" onclick="openPanel('Incorpora')">
                    <span class="name">Incorpora</span>
                    <span class="count">6 treb.</span>
                </div>
                <div class="treemap-item area-insercio tm-reincorpora" onclick="openPanel('Reincorpora')">
                    <span class="name">Reinc.</span>
                    <span class="count">4 t.</span>
                </div>

                <!-- Salut Mental -->
                <div class="treemap-item area-salut tm-sm-acomp" onclick="openPanel('SM Acompanyament')">
                    <span class="name">SM Acomp.</span>
                    <span class="count">10 treb.</span>
                    <span class="badge">1</span>
                </div>
                <div class="treemap-item area-salut tm-sm-hab growth" onclick="openPanel('SM Habitatge')">
                    <span class="name">SM Habitatge</span>
                    <span class="count">8 treb.</span>
                </div>
                <div class="treemap-item area-salut tm-sm-dom growth" onclick="openPanel('SM Domicilis')">
                    <span class="name">SM Domicilis</span>
                    <span class="count">4 treb.</span>
                </div>

                <!-- Penitenciari -->
                <div class="treemap-item area-penitenciari tm-preso-joves" onclick="openPanel('Pres√≥ Joves')">
                    <span class="name">M√≤dul Joves</span>
                    <span class="count">5 treb.</span>
                </div>
                <div class="treemap-item area-penitenciari tm-preso-cis" onclick="openPanel('CIS')">
                    <span class="name">Unitat CIS</span>
                    <span class="count">4 treb.</span>
                </div>
                <div class="treemap-item area-penitenciari tm-preso-alt paused" onclick="openPanel('Mesures Alternatives')">
                    <span class="name">Mes. Altern.</span>
                    <span class="count">3 treb.</span>
                </div>

                <!-- Administraci√≥ -->
                <div class="treemap-item area-admin tm-admin" onclick="openPanel('Administraci√≥')">
                    <span class="name">Administraci√≥ i Gesti√≥</span>
                    <span class="count">12 treballadors</span>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color area-comunitaria"></div>
                    <span>Intervenci√≥ Comunit√†ria</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color area-infancia"></div>
                    <span>Inf√†ncia, Joves i Fam√≠lia</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color area-insercio"></div>
                    <span>Inserci√≥ Laboral</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color area-salut"></div>
                    <span>Salut Mental</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color area-penitenciari"></div>
                    <span>Poblaci√≥ Penitenci√†ria</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color area-admin"></div>
                    <span>Administraci√≥</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol">‚Üó</span>
                    <span>L√≠nia creixement activa</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol">‚è∏</span>
                    <span>L√≠nia parada</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol" style="background:#d9534f;color:white;padding:2px 6px;border-radius:10px;font-size:11px;">2</span>
                    <span>Q√ºestions urgents</span>
                </div>
            </div>
        </div>

        <!-- OPCI√ìN 2: BURBUJAS -->
        <div id="bubbles" class="viz-container">

            <div class="option-description">
                <h3>Opci√≥ 2: Diagrama de Bombolles</h3>
                <p>Cada cercle √©s un programa. El <strong>tamany</strong> √©s proporcional als treballadors. Agrupats per √†rea.</p>
                <div class="pros-cons">
                    <div class="pros">
                        <h4>‚úì Avantatges</h4>
                        <ul>
                            <li>Molt visual i atractiu</li>
                            <li>F√†cil identificar √†rees</li>
                            <li>Org√†nic, menys r√≠gid</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>‚ö† Inconvenients</h4>
                        <ul>
                            <li>Ocupa m√©s espai</li>
                            <li>Dif√≠cil posar text en cercles petits</li>
                            <li>No mostra la jerarquia servei‚Üíprograma</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h2 class="section-title">Mapa de l'Entitat ¬∑ 2025</h2>

            <div class="bubbles-container">
                <!-- Intervenci√≥ Comunit√†ria -->
                <div class="bubble-group">
                    <div class="bubble-group-title area-comunitaria">Intervenci√≥ Comunit√†ria</div>
                    <div class="bubbles">
                        <div class="bubble area-comunitaria size-xl" onclick="openPanel('Palma')">
                            <span class="name">Palma</span>
                            <span class="count">12</span>
                        </div>
                        <div class="bubble area-comunitaria size-l" onclick="openPanel('Llucmajor')">
                            <span class="name">Llucmajor</span>
                            <span class="count">8</span>
                        </div>
                        <div class="bubble area-comunitaria size-m" onclick="openPanel('Alc√∫dia')">
                            <span class="name">Alc√∫dia</span>
                            <span class="count">6</span>
                        </div>
                        <div class="bubble area-comunitaria size-m" onclick="openPanel('CaixaProInf√†ncia')">
                            <span class="name">CaixaPro</span>
                            <span class="count">5</span>
                        </div>
                        <div class="bubble area-comunitaria size-s" onclick="openPanel('S√≥ller')">
                            <span class="name">S√≥ller</span>
                            <span class="count">4</span>
                        </div>
                        <div class="bubble area-comunitaria size-xs" onclick="openPanel('Sempre Acompanyats')">
                            <span class="count">2</span>
                        </div>
                    </div>
                </div>

                <!-- Inf√†ncia -->
                <div class="bubble-group">
                    <div class="bubble-group-title area-infancia">Inf√†ncia, Joves i Fam√≠lia</div>
                    <div class="bubbles">
                        <div class="bubble area-infancia size-xl" onclick="openPanel('Educadors Familiars')">
                            <span class="name">Ed. Familiars</span>
                            <span class="count">18</span>
                        </div>
                        <div class="bubble area-infancia size-xl" onclick="openPanel('Emancipaci√≥ Habitatge')">
                            <span class="name">Eman. Hab.</span>
                            <span class="count">14</span>
                        </div>
                        <div class="bubble area-infancia size-l" onclick="openPanel('Suport al Menor')">
                            <span class="name">Suport</span>
                            <span class="count">12</span>
                        </div>
                        <div class="bubble area-infancia size-l" onclick="openPanel('Emancipaci√≥ Acompanyament')">
                            <span class="name">Eman. Ac.</span>
                            <span class="count">10</span>
                        </div>
                        <div class="bubble area-infancia size-m" onclick="openPanel('Llar')">
                            <span class="name">Llar</span>
                            <span class="count">8</span>
                        </div>
                    </div>
                </div>

                <!-- Inserci√≥ -->
                <div class="bubble-group">
                    <div class="bubble-group-title area-insercio">Inserci√≥ Laboral</div>
                    <div class="bubbles">
                        <div class="bubble area-insercio size-xl" onclick="openPanel('SOIB')">
                            <span class="name">SOIB</span>
                            <span class="count">15</span>
                        </div>
                        <div class="bubble area-insercio size-m" onclick="openPanel('Incorpora')">
                            <span class="name">Incorpora</span>
                            <span class="count">6</span>
                        </div>
                        <div class="bubble area-insercio size-s" onclick="openPanel('Reincorpora')">
                            <span class="name">Reinc.</span>
                            <span class="count">4</span>
                        </div>
                    </div>
                </div>

                <!-- Salut Mental -->
                <div class="bubble-group">
                    <div class="bubble-group-title area-salut">Salut Mental</div>
                    <div class="bubbles">
                        <div class="bubble area-salut size-l" onclick="openPanel('SM Acompanyament')">
                            <span class="name">SM Acomp.</span>
                            <span class="count">10</span>
                        </div>
                        <div class="bubble area-salut size-m" onclick="openPanel('SM Habitatge')">
                            <span class="name">SM Hab.</span>
                            <span class="count">8</span>
                        </div>
                        <div class="bubble area-salut size-s" onclick="openPanel('SM Domicilis')">
                            <span class="name">Dom.</span>
                            <span class="count">4</span>
                        </div>
                    </div>
                </div>

                <!-- Penitenciari -->
                <div class="bubble-group">
                    <div class="bubble-group-title area-penitenciari">Penitenciari</div>
                    <div class="bubbles">
                        <div class="bubble area-penitenciari size-s" onclick="openPanel('Pres√≥ Joves')">
                            <span class="name">Joves</span>
                            <span class="count">5</span>
                        </div>
                        <div class="bubble area-penitenciari size-s" onclick="openPanel('CIS')">
                            <span class="name">CIS</span>
                            <span class="count">4</span>
                        </div>
                        <div class="bubble area-penitenciari size-xs" onclick="openPanel('Mesures Alternatives')">
                            <span class="count">3</span>
                        </div>
                    </div>
                </div>

                <!-- Admin -->
                <div class="bubble-group">
                    <div class="bubble-group-title area-admin">Administraci√≥</div>
                    <div class="bubbles">
                        <div class="bubble area-admin size-xl" onclick="openPanel('Administraci√≥')">
                            <span class="name">Admin</span>
                            <span class="count">12</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OPCI√ìN 3: ORGANIGRAMA -->
        <div id="org" class="viz-container">

            <div class="option-description">
                <h3>Opci√≥ 3: Organigrama Interactiu</h3>
                <p>Estructura jer√†rquica expandible: √Ärea ‚Üí Servei ‚Üí Programa. Cada programa mostra el seu estat.</p>
                <div class="pros-cons">
                    <div class="pros">
                        <h4>‚úì Avantatges</h4>
                        <ul>
                            <li>Mostra clarament la jerarquia</li>
                            <li>Familiar (sembla un organigrama tradicional)</li>
                            <li>F√†cil de llegir, espai per a text</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>‚ö† Inconvenients</h4>
                        <ul>
                            <li>M√©s llarg, cal fer scroll</li>
                            <li>No es veu "el pes" de cada programa d'un cop d'ull</li>
                            <li>Menys visual/impactant</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h2 class="section-title">Mapa de l'Entitat ¬∑ 2025</h2>

            <div class="org-tree">
                <!-- Intervenci√≥ Comunit√†ria -->
                <div class="org-area expanded">
                    <div class="org-area-header area-comunitaria" onclick="toggleArea(this)">
                        <h3>Intervenci√≥ Comunit√†ria</h3>
                        <div class="stats">45 treballadors ¬∑ 11 programes</div>
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="org-services">
                        <div class="org-service">
                            <div class="org-service-name">Servei socioeducatiu en medi obert</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('Palma')">
                                    <span>Ajuntament de Palma</span>
                                    <span class="workers">12</span>
                                </div>
                                <div class="org-program growth" onclick="openPanel('Llucmajor')">
                                    <span>Ajuntament de Llucmajor</span>
                                    <span class="workers">8</span>
                                    <span class="status">‚Üó</span>
                                </div>
                                <div class="org-program growth" onclick="openPanel('Alc√∫dia')">
                                    <span>Ajuntament d'Alc√∫dia</span>
                                    <span class="workers">6</span>
                                    <span class="status">‚Üó</span>
                                </div>
                                <div class="org-program" onclick="openPanel('S√≥ller')">
                                    <span>Ajuntament de S√≥ller</span>
                                    <span class="workers">4</span>
                                </div>
                                <div class="org-program" onclick="openPanel('Altres')">
                                    <span>Altres municipis (Dei√†, Fornalutx, Esporles...)</span>
                                    <span class="workers">8</span>
                                </div>
                            </div>
                        </div>
                        <div class="org-service">
                            <div class="org-service-name">Altres serveis comunitaris</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('CaixaProInf√†ncia')">
                                    <span>CaixaProInf√†ncia</span>
                                    <span class="workers">5</span>
                                </div>
                                <div class="org-program" onclick="openPanel('Sempre Acompanyats')">
                                    <span>Sempre Acompanyats</span>
                                    <span class="workers">2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Inf√†ncia -->
                <div class="org-area">
                    <div class="org-area-header area-infancia" onclick="toggleArea(this)">
                        <h3>Inf√†ncia, Joves i Fam√≠lia</h3>
                        <div class="stats">62 treballadors ¬∑ 5 programes ¬∑ üî¥ 1 urgent</div>
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="org-services">
                        <div class="org-service">
                            <div class="org-service-name">Intervenci√≥ familiar en el domicili</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('Educadors Familiars')">
                                    <span>Educadors Familiars</span>
                                    <span class="workers">18</span>
                                    <span class="status">üî¥</span>
                                </div>
                                <div class="org-program" onclick="openPanel('Suport al Menor')">
                                    <span>Suport al Menor</span>
                                    <span class="workers">12</span>
                                </div>
                            </div>
                        </div>
                        <div class="org-service">
                            <div class="org-service-name">Acolliment residencial</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('Llar')">
                                    <span>Llar de menors</span>
                                    <span class="workers">8</span>
                                </div>
                            </div>
                        </div>
                        <div class="org-service">
                            <div class="org-service-name">Servei d'emancipaci√≥ per a joves 18-25</div>
                            <div class="org-programs">
                                <div class="org-program growth" onclick="openPanel('Emancipaci√≥ Acompanyament')">
                                    <span>Acompanyament a l'emancipaci√≥</span>
                                    <span class="workers">10</span>
                                    <span class="status">‚Üó</span>
                                </div>
                                <div class="org-program growth" onclick="openPanel('Emancipaci√≥ Habitatge')">
                                    <span>Habitatge per a l'emancipaci√≥</span>
                                    <span class="workers">14</span>
                                    <span class="status">‚Üó</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Inserci√≥ -->
                <div class="org-area">
                    <div class="org-area-header area-insercio" onclick="toggleArea(this)">
                        <h3>√Ärea d'Inserci√≥ Laboral</h3>
                        <div class="stats">25 treballadors ¬∑ 3 programes</div>
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="org-services">
                        <div class="org-service">
                            <div class="org-service-name">Serveis d'ocupaci√≥</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('SOIB')">
                                    <span>Servei d'Orientaci√≥ Professional (SOIB)</span>
                                    <span class="workers">15</span>
                                </div>
                                <div class="org-program" onclick="openPanel('Incorpora')">
                                    <span>Incorpora (Cl√†ssic, Autoocupaci√≥, Punts Formatius)</span>
                                    <span class="workers">6</span>
                                </div>
                                <div class="org-program" onclick="openPanel('Reincorpora')">
                                    <span>Reincorpora</span>
                                    <span class="workers">4</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Salut Mental -->
                <div class="org-area">
                    <div class="org-area-header area-salut" onclick="toggleArea(this)">
                        <h3>√Ärea de Salut Mental i Discapacitat</h3>
                        <div class="stats">22 treballadors ¬∑ 3 programes ¬∑ üî¥ 1 urgent</div>
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="org-services">
                        <div class="org-service">
                            <div class="org-service-name">Serveis per a persones amb diagn√≤stic de salut mental</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('SM Acompanyament')">
                                    <span>Servei d'acompanyament</span>
                                    <span class="workers">10</span>
                                    <span class="status">üî¥</span>
                                </div>
                                <div class="org-program growth" onclick="openPanel('SM Habitatge')">
                                    <span>Habitatge supervisat</span>
                                    <span class="workers">8</span>
                                    <span class="status">‚Üó</span>
                                </div>
                                <div class="org-program new" onclick="openPanel('SM Domicilis')">
                                    <span>Domicilis compartits</span>
                                    <span class="workers">4</span>
                                    <span class="status">üÜï</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Penitenciari -->
                <div class="org-area">
                    <div class="org-area-header area-penitenciari" onclick="toggleArea(this)">
                        <h3>√Ärea de Poblaci√≥ Penitenci√†ria</h3>
                        <div class="stats">12 treballadors ¬∑ 4 programes</div>
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="org-services">
                        <div class="org-service">
                            <div class="org-service-name">Programes penitenciaris</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('Pres√≥ Joves')">
                                    <span>M√≤dul de joves del centre penitenciari</span>
                                    <span class="workers">5</span>
                                </div>
                                <div class="org-program" onclick="openPanel('CIS')">
                                    <span>Unitat Dependent del CIS</span>
                                    <span class="workers">4</span>
                                </div>
                                <div class="org-program paused" onclick="openPanel('Mesures Alternatives')">
                                    <span>Mesures Alternatives / Just√≠cia Restaurativa</span>
                                    <span class="workers">3</span>
                                    <span class="status">‚è∏</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Administraci√≥ -->
                <div class="org-area">
                    <div class="org-area-header area-admin" onclick="toggleArea(this)">
                        <h3>√Ärea d'Administraci√≥</h3>
                        <div class="stats">12 treballadors ¬∑ 7 processos</div>
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="org-services">
                        <div class="org-service">
                            <div class="org-service-name">Processos de gesti√≥</div>
                            <div class="org-programs">
                                <div class="org-program" onclick="openPanel('Gesti√≥ econ√≤mica')">
                                    <span>Gesti√≥ econ√≤mica</span>
                                </div>
                                <div class="org-program" onclick="openPanel('RRHH')">
                                    <span>Gesti√≥ de recursos humans</span>
                                </div>
                                <div class="org-program" onclick="openPanel('Qualitat')">
                                    <span>Gesti√≥ de qualitat</span>
                                </div>
                                <div class="org-program" onclick="openPanel('Planificaci√≥')">
                                    <span>Planificaci√≥</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="legend" style="margin-top: 20px;">
                <div class="legend-item">
                    <div style="width:16px;height:4px;background:#4caf50;border-radius:2px;"></div>
                    <span>L√≠nia creixement activa (‚Üó)</span>
                </div>
                <div class="legend-item">
                    <div style="width:16px;height:4px;background:#2196f3;border-radius:2px;"></div>
                    <span>Programa nou (üÜï)</span>
                </div>
                <div class="legend-item">
                    <div style="width:16px;height:4px;background:#ff9800;border-radius:2px;"></div>
                    <span>L√≠nia parada (‚è∏)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol">üî¥</span>
                    <span>T√© q√ºestions urgents</span>
                </div>
            </div>
        </div>

    </main>

    <!-- Panel lateral de informaci√≥n -->
    <div id="infoPanel" class="info-panel">
        <div class="info-panel-header">
            <h2 id="panelTitle">Programa</h2>
            <button class="info-panel-close" onclick="closePanel()">√ó</button>
        </div>
        <div class="info-panel-content">
            <div class="info-stats">
                <div class="info-stat">
                    <div class="number" id="panelWorkers">12</div>
                    <div class="label">Treballadors</div>
                </div>
                <div class="info-stat">
                    <div class="number" id="panelUsers">187</div>
                    <div class="label">Usuaris atesos</div>
                </div>
            </div>

            <div class="info-section" style="margin-top: 20px;">
                <h4>Director/a responsable</h4>
                <p id="panelDirector">Sebas</p>
            </div>

            <div class="info-section">
                <h4>√Ärea</h4>
                <p id="panelArea">Inf√†ncia, Joves i Fam√≠lia</p>
            </div>

            <div class="info-section">
                <h4>Q√ºestions obertes</h4>
                <div id="panelQuestiones">
                    <div class="questio-mini urgent">
                        üî¥ Taules salarials del conveni de discapacitat
                    </div>
                    <div class="questio-mini">
                        Ratios nous habitatges supervisats
                    </div>
                </div>
            </div>

            <div class="info-section">
                <h4>Estat</h4>
                <p id="panelStatus" style="color: #4caf50; font-weight: 600;">‚Üó L√≠nia de creixement activa</p>
            </div>
        </div>
    </div>

    <script>
        // Cambiar entre tabs
        function showTab(tabId) {
            // Desactivar todos los tabs y contenidos
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.viz-container').forEach(viz => viz.classList.remove('active'));

            // Activar el seleccionado
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Toggle √°reas en organigrama
        function toggleArea(header) {
            header.parentElement.classList.toggle('expanded');
        }

        // Abrir panel de informaci√≥n
        function openPanel(name) {
            document.getElementById('panelTitle').textContent = name;
            document.getElementById('infoPanel').classList.add('open');

            // Datos de ejemplo seg√∫n el programa
            const data = {
                'Educadors Familiars': { workers: 18, users: 187, director: 'Sebas', area: 'Inf√†ncia, Joves i Fam√≠lia', status: 'Actiu' },
                'SM Acompanyament': { workers: 10, users: 85, director: 'Elisenda', area: 'Salut Mental', status: '‚Üó L√≠nia de creixement' },
                'SOIB': { workers: 15, users: 304, director: 'Lorena', area: 'Inserci√≥ Laboral', status: 'Actiu' },
                'Emancipaci√≥ Habitatge': { workers: 14, users: 75, director: 'Carme', area: 'Inf√†ncia, Joves i Fam√≠lia', status: '‚Üó L√≠nia de creixement' }
            };

            const info = data[name] || { workers: '?', users: '?', director: 'No assignat', area: '-', status: 'Actiu' };
            document.getElementById('panelWorkers').textContent = info.workers;
            document.getElementById('panelUsers').textContent = info.users;
            document.getElementById('panelDirector').textContent = info.director;
            document.getElementById('panelArea').textContent = info.area;
            document.getElementById('panelStatus').textContent = info.status;
        }

        // Cerrar panel
        function closePanel() {
            document.getElementById('infoPanel').classList.remove('open');
        }

        // Cerrar panel al hacer clic fuera
        document.addEventListener('click', function(e) {
            const panel = document.getElementById('infoPanel');
            if (panel.classList.contains('open') &&
                !panel.contains(e.target) &&
                !e.target.classList.contains('treemap-item') &&
                !e.target.classList.contains('bubble') &&
                !e.target.classList.contains('org-program') &&
                !e.target.closest('.treemap-item') &&
                !e.target.closest('.bubble') &&
                !e.target.closest('.org-program')) {
                closePanel();
            }
        });
    </script>

</body>
</html>
